## Функциональные требования

[Home](../index.md)    
[Функциональные требования](functional_requirements.md)  
[Диаграмма файлов приложения](files_diagram.md)  
[Дополнительная спецификация](additional_specification.md)   
[Схема базы данных](database_schema.md)  
[API-проекта](project_api.md)  
[Презентация проекта](project_presentation.md)

## Функциональные требования

### Требования к приложению

Приложение должно:

- Обеспечивать подробной информацией о рецептах (инструкции и фотографии)
- Позволять осуществлять поиск рецептов по характеристикам (по названию, по времени приготовления, по наличию ингредиентов и т.д.)
- Хранить данные о калорийности блюд и продуктов
- Подсчитывать калории
- Позволять определять количество порций для приготовления
- Позволять создавать и редактировать собственные рецепты
- Позволять оставлять отзывы о рецептах
- Позволять добавлять рецепты в “избранные”

### Use case диаграммы и сценарии вариантов использования
#### Общая диаграмма вариантов использования
![Общая диаграмма](https://github.com/fpmi-hci-2023/project13a-dishcraft/assets/78850433/38ee926a-2ed8-444a-8ec9-077123b7ff48)
#### Вариант использования «Войти в систему»
Данный вариант использования описывает вход пользователя в систему поиска рецептов.  

**Предусловия:** пользователь взаимодействует с системой как гость, то есть еще не выполнил вход в систему.  
**Цель:** предоставление доступа к функциям, доступным только зарегистрированным пользователям.  

**Основной сценарий**
1.	Пользователь сообщает о желании войти в систему.
2.	Система запрашивает имя пользователя и пароль.
3.	Пользователь вводит имя и пароль.
4.	Система выполняет аутентификацию пользователя.
5.	Система предоставляет пользователю доступ к функциям системы в соответствии с его ролью (обычный пользователь, администратор).  

**Альтернативные сценарии**

*5А Неверное имя пользователя или пароль*
1.	Система сообщает пользователю, что введенное имя пользователя или пароль неверны.
2.	Система предлагает пользователю повторить ввод имени и пароля или отказаться от входа в систему.
3.	В зависимости от выбора пользователя выполнение переходит к шагу 2 основного сценария или вариант использования завершается.

#### Вариант использования «Зарегистрироваться в системе»
Данный вариант использования описывает регистрацию пользователя в системе поиска рецептов.  

**Цель:** добавление нового пользователя и предоставление ему доступа к функциям, доступным только зарегистрированным пользователям.

**Основной сценарий**
1.	Пользователь сообщает о желании зарегистрироваться в системе.
2.	Система просит пользователя ввести имя, пароль и повторно ввести пароль.
3.	Пользователь вводит данные.
4.	Система проверяет правильность введенных данных и совпадение введенных паролей.
5.	Система сохраняет данные о пользователе.
6.	Система перенаправляет пользователя на главную страницу.  

**Альтернативные сценарии**  
*5А Введенные данные не соответствуют требуемому формату, пользователь с таким именем уже существует или пароли не совпадают.*
1.	Система отображает форму регистрации.
2.	Система сообщает пользователю о том, какие поля заполнены неверно.
3.	Пользователь редактирует введенные данные или отказывается от регистрации в системе.
4.	В зависимости от выбора пользователя выполнение переходит на шаг 3 основного сценария или вариант использования завершается.

#### Вариант использования «Просмотр рецептов»

Данный вариант использования включает различные действия пользователя, связанные с просмотром рецептов, такие как поиск рецептов, просмотр краткой и подробной информации о рецепте, оценка рецепта.  
Подробное описание варианта использования представлено в виде отдельной диаграммы «Просмотр рецептов».  

#### Вариант использования «Управление своими рецептами»
Данный вариант использования позволяет пользователю создавать, редактировать и просматривать свои рецепты.  
Подробное описание варианта использования представлено в виде отдельной диаграммы «Управление своими рецептами».   

#### Вариант использования «Просмотр избранных рецептов»
Данный вариант использования позволяет пользователю просматривать рецепты, которые помечены им как избранные.  

**Предусловия:** для выполнения варианта использования пользователь должен быть зарегистрирован в системе.  
**Цель:** получение пользователем информации о рецептах, которые помечены им как избранные.  

**Основной сценарий**  
1. Пользователь сообщает системе о желании просмотреть избранные рецепты.
2. Система запрашивает информацию об избранных рецептах пользователя с сервера.
3. Система получает информацию об избранных рецептах пользователя.
4. Система отображает список рецептов, которые помечены пользователем как избранные.  

**Альтернативные сценарии**  
*4А Ошибка получения информации с сервера*  
1. Система сообщает пользователю о том, что произошла ошибка получения данных с сервера.
2. Вариант использования завершается.
*4Б Пользователь не добавил ни одного рецепта в избранное*  
1. Система сообщает пользователю об отсутствии избранных рецептов.
2. Система предлагает пользователю перейти к списку рецептов.
3. Вариант использования завершается.


#### Диаграмма «Управление своими рецептами»
![Управление своими рецептами](https://github.com/fpmi-hci-2023/project13a-dishcraft/assets/78850433/5b484370-d3ed-4a2f-ad14-5786fae09a07)

#### Вариант использования «Добавить рецепт»

Данный вариант использования позволяет пользователям создавать рецепты.

**Предусловия:** для выполнения варианта использования пользователь должен быть зарегистрирован в системе.  
**Цель:** появление нового рецепта в базе данных системы и отображение его в списке блюд, созданных пользователем.  

**Основной сценарий**
1.	Пользователь сообщает системе о желании добавить новый рецепт.
2.	Система предлагает пользователю заполнить форму с информацией о рецепте.
3.	Пользователь заполняет информацию о блюде:  
    * название
    * краткое описание
    * время приготовления
    * фото
    * количество порций, на которое рассчитан рецепт
    * ингредиенты
4.	Пользователь добавляет новый этап создания блюда.
5.	Пользователь добавляет фото для данного этапа.
6.	Пользователь добавляет описание этапа.
7.	Если необходимо добавить еще один этап создания блюда, пользователь возвращается на шаг 4.
8.	Пользователь сообщает системе, что информация о блюде заполнена.
9.	Система проверяет корректность заполнения информации о блюде.
10. Система отправляет данные о блюде на сервер.
11. Сервер подтверждает, что информация о блюде была сохранена.
12. Система сообщает пользователю, что блюдо было успешно добавлено.
13. Система перенаправляет пользователя к списку созданных им блюд, в котором присутствует только что созданное блюдо.

**Альтернативные сценарии**  
*10А Данные о блюде заполнены некорректно.*  
1.	Система отображает форму с информацией о рецепте.
2.	Система сообщает пользователю о том, какие поля заполнены неверно.
3.	Пользователь редактирует информацию о рецепте.
4.	Выполнение переходит на этап 8 основного сценария.  

*11А Сервер сообщает об ошибке сохранения информации о блюде или нет доступа к серверу.*  
1.	Система сообщает пользователю о том, что при попытке сохранения рецепта произошла ошибка и рецепт не был сохранен.
2.	Система перенаправляет пользователя к списку созданных им блюд, в котором отсутствует только что созданное блюдо.
3.	Вариант использования завершается.

#### Вариант использования «Редактировать рецепт»

Данный вариант использования позволяет пользователям редактировать информацию о своих рецептах.

**Предусловия:** для выполнения варианта использования пользователь должен быть зарегистрирован в системе и добавить хотя бы один свой рецепт, который он будет редактировать.  
**Цель:** обновление информации о рецепте в базе данных системы.  

**Основной сценарий**  
1.	Пользователь сообщает системе о желании отредактировать информацию о рецепте.
2.	Система запрашивает информацию о рецепте с сервера.
3.	Система отображает форму с информацией о рецепте, заполненную текущими данными о рецепте.
4.	Пользователь редактирует информацию о рецепте.
5.	Пользователь сообщает системе о том, что он завершил редактирование информации о рецепте.
6.	Система проверяет корректность заполнения информации о рецепте.
7.	Система отправляет данные о рецепте на сервер.
8.	Сервер подтверждает, что информация о рецепте была обновлена.
9.	Система сообщает пользователю, что информация о рецепте была успешно обновлена.
10. Система перенаправляет пользователя к списку созданных им блюд, в котором отображается обновленная информация об отредактированном рецепте.

**Альтернативные сценарии**  
*3А Ошибка получения информации о рецепте с сервера.*  
1.	Система сообщает пользователю об ошибке.
2.	Система перенаправляет пользователя к списку созданных им блюд, в котором отображается старая информация об отредактированном рецепте.
3.	Вариант использования завершается.
*8А Ошибка сохранения информации о рецепте на сервер.*  
1.	Система сообщает пользователю о том, что при попытке сохранения информации о рецепте произошла ошибка и рецепт не был сохранен.
2.	Система перенаправляет пользователя к списку созданных им блюд, в котором отображается старая информация об отредактированном рецепте.
3.	Вариант использования завершается.

#### Вариант использования «Просмотреть свои рецепты»
Данный вариант использования позволяет пользователям просматривать созданные ими рецепты.

**Предусловия:** для выполнения варианта использования пользователь должен быть зарегистрирован в системе.  
**Цель:** получение пользователем информации о созданных им рецептах.  

**Основной сценарий**
1.	Пользователь сообщает системе о желании просмотреть свои рецепты.
2.	Система запрашивает информацию о рецептах пользователя с сервера.
3.	Система получает информацию о всех рецептах, созданных пользователем.
4.	Система отображает список рецептов, созданных пользователем.  

**Альтернативные сценарии**  
*3А Ошибка получения информации с сервера*  
1.	Система сообщает пользователю о том, что произошла ошибка получения данных с сервера.
2.	Вариант использования завершается.

#### Диаграмма «Просмотр рецептов»
![Просмотр рецептов](https://github.com/fpmi-hci-2023/project13a-dishcraft/assets/78850433/c6ad87e4-67d4-49a3-8991-522a19ece45f)

#### Вариант использования «Поиск рецептов»

Данный вариант использования позволяет пользователям осуществлять поиск рецептов по различным параметрам.

**Цель:** получение пользователем списка доступных рецептов, соответствующих заданным условиям поиска, с краткой информацией о данных рецептах.  

**Основной сценарий**  
1.	Пользователь передает системе запрос для поиска блюда.
2.	Пользователь указывает желаемые критерии поиска (наличие ингредиента, время приготовления, калорийность).
3.	Система отправляет запрос на поиск рецептов на сервер.
4.	Система получает список найденных рецептов.
5.	Система отображает краткую информацию о всех найденных рецептах. Краткая информация включает название рецепта, время приготовления, сложность, калорийность и краткое описание рецепта.  

**Альтернативные сценарии**  
*4А Ошибка получения информации с сервера*  
1.	Система сообщает пользователю о том, что произошла ошибка получения данных с сервера.
2.	Вариант использования завершается.
*4Б Данные по запросу не найдены*  
1.	Система сообщает пользователю об отсутствии данных по указанному запросу.
2.	Вариант использования завершается.

#### Вариант использования «Просмотр информации о блюде»

Данный вариант использования позволяет пользователям просмотреть всю доступную информацию о блюде.

**Предусловия:** отображается одна из страниц со списком рецептов: результат поиска, избранные рецепты, мои рецепты, список популярных рецептов на главной странице.  
**Цель:** получение информации о блюде.  

**Основной сценарий**
1.	Пользователь просматривает краткую информацию о блюде на странице со списком рецептов. Она включает название блюда, время приготовления, сложность, калорийность и краткое описание блюда.
2.	Пользователь запрашивает полную информацию о рецепте.
3.	Система выполняет запрос на сервер для получения информации о рецепте.
4.	Система отображает информацию о блюде:
    * Название блюда
    * Краткое описание
    * Фото
    * Рейтинг
    * Калорийность блюда
    * Содержание белков, жиров, углеводов
    * Список ингредиентов
    * Пошаговый рецепт
    * Отзывы
5.	Пользователь указывает желаемое количество порций.
6.	Система рассчитывает количество каждого ингредиента для данного количества порций.
7.	Пользователь просматривает информацию о блюде.
8.	Пользователь просматривает отзывы на рецепт.
9.	Пользователь выражает свое отношение к рецепту (добавляет в избранное, оставляет отзыв, ставит оценку рецепту).
10.При необходимости пользователь возвращается на шаг 5.

**Подчиненные сценарии**  
*9А Добавление рецепта в избранное.*  
1.	Пользователь сообщает системе о желании добавить рецепт в избранное.
2.	Система передает запрос на сервер.
3.	Выполнение переходит к основному сценарию.
*9Б Оценить рецепт*  
1.	Пользователь сообщает системе свою оценку рецепта.
2.	Система передает запрос на сервер.
3.	Выполнение переходит к основному сценарию.
*9В Оставить отзыв*  
1.	Выполняется вариант использования оставить отзыв.
2.	Выполнение переходит к основному сценарию.

**Альтернативные сценарии**  
*4А Ошибка получения данных*  
1.	Система сообщает пользователю о том, что произошла ошибка получения данных с сервера.
2.	Вариант использования завершается.
*9Б 2А Ошибка сохранения данных*  
1.	Система сообщает пользователю о том, что данные не были сохранены в связи с ошибкой.
2.	Выполнение переходит к основному сценарию.

#### Вариант использования «Оставить отзыв»

Данный вариант использования позволяет пользователям оставлять свои комментарии к рецепту.

**Предусловия:** отображается подробная информация о рецепте, на который пользователь будет оставлять отзыв.  
**Цель:** добавление отзыва о рецепте и его отображение для других пользователей.  

**Основной сценарий**
1.	Пользователь вводит текст отзыва.
2.	Пользователь сообщает системе о необходимости сохранить отзыв.
3.	Система сохраняет отзыв.
4.	Отзыв отображается в списке отзывов на рецепт.

**Альтернативные сценарии**  
*3А Ошибка сохранения данных*  
1.	Система сообщает пользователю о том, что отзыв не был добавлен в связи с ошибкой.
2.	Вариант использования завершается.
