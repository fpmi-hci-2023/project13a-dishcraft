## Схема базы данных

[Home](../index.md)    
[Функциональные требования](functional_requirements.md)  
[Диаграмма файлов приложения](files_diagram.md)  
[Дополнительная спецификация](additional_specification.md)   
[Схема базы данных](database_schema.md)  
[API-проекта](project_api.md)  
[Презентация проекта](project_presentation.md)

## Схема базы данных

![Схема БД](https://github.com/fpmi-hci-2023/project13a-dishcraft/assets/78850433/6fff08fa-c277-4bb8-9d76-25f1afa70481)

Основные сущности рассматриваемой предметной области — пользователь (таблица user), рецепт (таблица recipe), продукт (таблица product), комментарий (таблица comment).

Связь многие ко многим между таблицами recipe и product реализована с помощью промежуточной таблицы recipe_product, которая, помимо идентификатора рецепта recipe_id и продукта product_id, содержит дополнительные сведения об использовании продукта в рецепте: количество продукта в граммах (grams) и в альтернативных единицах измерения (units_amount) (ложки, стаканы, штуки и т.д.). Множество возможных значений единиц измерения продуктов хранится в отдельной таблице measure_unit.

Сложность рецепта может принимать значения из строго определенного набора (просто, средне, сложно). Множество таких значений хранится в отдельной таблице recipe_complexity, связанной с recipe.

Для хранения оценок блюд пользователями и сведений об избранных рецептах использованы таблицы rating и favourite_recipe. В данных таблицах пара внешних ключей (user_id, recipe_id) должна быть уникальной, поскольку каждый пользователь может оценить каждый рецепт не более одного раза и не более одного раза добавить его в избранное. В таблице comment пара внешних ключей (user_id, recipe_id) не обязана быть уникальной, пользователь может оставлять множество комментариев к одному и тому же рецепту.

Для хранения пошагового описания рецептов выделена таблица step, в которой хранятся шаги всех рецептов с указанием порядкового номера в рецепте.
